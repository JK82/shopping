{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { createContext, useContext, useMemo } from 'react';\nimport { useApi } from './useApi';\nconst ShoppingListContext = /*#__PURE__*/createContext();\nexport const ShoppingListProvider = ShoppingListContext.Provider;\nexport default function useShoppingList() {\n  _s();\n\n  const api = useApi();\n  const {\n    shoppingList,\n    setShoppingList\n  } = useContext(ShoppingListContext);\n  const self = useMemo(() => {\n    return { ...shoppingList,\n\n      // Check if a this represents a valid shoppingList\n      get itemCount() {\n        var _shoppingList$items;\n\n        return ((_shoppingList$items = shoppingList.items) === null || _shoppingList$items === void 0 ? void 0 : _shoppingList$items.length) || 0;\n      },\n\n      async getOrCreateShoppingList() {\n        let shoppingList = await api.getShoppingList();\n\n        if (!shoppingList || shoppingList.length <= 0) {\n          shoppingList = await api.createShoppingList();\n        }\n\n        setShoppingList(shoppingList[0]);\n        return shoppingList;\n      },\n\n      async addItemToShoppingList(values) {\n        console.log(shoppingList);\n        values.list_id = shoppingList.id;\n        console.log(values);\n        await api.createShoppingListItem(values);\n        let updatedShoppingList = await api.getShoppingList();\n        setShoppingList(updatedShoppingList[0]);\n      },\n\n      async deleteItemToShoppingList(itemId) {\n        await api.deleteShoppingListItem(itemId);\n        let updatedShoppingList = await api.getShoppingList();\n        setShoppingList(updatedShoppingList[0]);\n      }\n\n    };\n  }, [shoppingList, api, setShoppingList]);\n  return self;\n}\n\n_s(useShoppingList, \"k6UmQvnAOflCKDDwtzZ/FCL8wYk=\", false, function () {\n  return [useApi];\n});","map":{"version":3,"sources":["/Users/johnkeane/keanelabs/shopping-list/client/src/hooks/useShoppingList.js"],"names":["createContext","useContext","useMemo","useApi","ShoppingListContext","ShoppingListProvider","Provider","useShoppingList","api","shoppingList","setShoppingList","self","itemCount","items","length","getOrCreateShoppingList","getShoppingList","createShoppingList","addItemToShoppingList","values","console","log","list_id","id","createShoppingListItem","updatedShoppingList","deleteItemToShoppingList","itemId","deleteShoppingListItem"],"mappings":";;AAAA,SAAQA,aAAR,EAAuBC,UAAvB,EAAmCC,OAAnC,QAAiD,OAAjD;AACA,SAAQC,MAAR,QAAqB,UAArB;AAEA,MAAMC,mBAAmB,gBAAGJ,aAAa,EAAzC;AACA,OAAO,MAAMK,oBAAoB,GAAGD,mBAAmB,CAACE,QAAjD;AAEP,eAAe,SAASC,eAAT,GAA2B;AAAA;;AACtC,QAAMC,GAAG,GAAGL,MAAM,EAAlB;AACA,QAAM;AAACM,IAAAA,YAAD;AAAeC,IAAAA;AAAf,MAAkCT,UAAU,CAACG,mBAAD,CAAlD;AAEA,QAAMO,IAAI,GAAGT,OAAO,CAAC,MAAM;AACvB,WAAO,EACH,GAAGO,YADA;;AAGH;AAEA,UAAIG,SAAJ,GAAgB;AAAA;;AACZ,eAAO,wBAAAH,YAAY,CAACI,KAAb,4EAAoBC,MAApB,KAA8B,CAArC;AACH,OAPE;;AASH,YAAMC,uBAAN,GAAgC;AAC5B,YAAIN,YAAY,GAAG,MAAMD,GAAG,CAACQ,eAAJ,EAAzB;;AACA,YAAI,CAACP,YAAD,IAAiBA,YAAY,CAACK,MAAb,IAAuB,CAA5C,EAA+C;AAC3CL,UAAAA,YAAY,GAAG,MAAMD,GAAG,CAACS,kBAAJ,EAArB;AACH;;AACDP,QAAAA,eAAe,CAACD,YAAY,CAAC,CAAD,CAAb,CAAf;AACA,eAAOA,YAAP;AACH,OAhBE;;AAkBH,YAAMS,qBAAN,CAA4BC,MAA5B,EAAoC;AAChCC,QAAAA,OAAO,CAACC,GAAR,CAAYZ,YAAZ;AACAU,QAAAA,MAAM,CAACG,OAAP,GAAiBb,YAAY,CAACc,EAA9B;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACA,cAAMX,GAAG,CAACgB,sBAAJ,CAA2BL,MAA3B,CAAN;AACA,YAAIM,mBAAmB,GAAG,MAAMjB,GAAG,CAACQ,eAAJ,EAAhC;AACAN,QAAAA,eAAe,CAACe,mBAAmB,CAAC,CAAD,CAApB,CAAf;AACH,OAzBE;;AA2BH,YAAMC,wBAAN,CAA+BC,MAA/B,EAAuC;AACnC,cAAMnB,GAAG,CAACoB,sBAAJ,CAA2BD,MAA3B,CAAN;AACA,YAAIF,mBAAmB,GAAG,MAAMjB,GAAG,CAACQ,eAAJ,EAAhC;AACAN,QAAAA,eAAe,CAACe,mBAAmB,CAAC,CAAD,CAApB,CAAf;AACH;;AA/BE,KAAP;AAiCH,GAlCmB,EAkCjB,CAAChB,YAAD,EAAeD,GAAf,EAAoBE,eAApB,CAlCiB,CAApB;AAoCA,SAAOC,IAAP;AACH;;GAzCuBJ,e;UACRJ,M","sourcesContent":["import {createContext, useContext, useMemo} from 'react'\nimport {useApi} from './useApi'\n\nconst ShoppingListContext = createContext()\nexport const ShoppingListProvider = ShoppingListContext.Provider\n\nexport default function useShoppingList() {\n    const api = useApi()\n    const {shoppingList, setShoppingList} = useContext(ShoppingListContext)\n\n    const self = useMemo(() => {\n        return {\n            ...shoppingList,\n\n            // Check if a this represents a valid shoppingList\n\n            get itemCount() {\n                return shoppingList.items?.length || 0\n            },\n\n            async getOrCreateShoppingList() {\n                let shoppingList = await api.getShoppingList()\n                if (!shoppingList || shoppingList.length <= 0) {\n                    shoppingList = await api.createShoppingList()\n                }\n                setShoppingList(shoppingList[0])\n                return shoppingList\n            },\n\n            async addItemToShoppingList(values) {\n                console.log(shoppingList)\n                values.list_id = shoppingList.id\n                console.log(values)\n                await api.createShoppingListItem(values)\n                let updatedShoppingList = await api.getShoppingList()\n                setShoppingList(updatedShoppingList[0])\n            },\n\n            async deleteItemToShoppingList(itemId) {\n                await api.deleteShoppingListItem(itemId)\n                let updatedShoppingList = await api.getShoppingList()\n                setShoppingList(updatedShoppingList[0])\n            }\n        }\n    }, [shoppingList, api, setShoppingList])\n\n    return self\n}\n"]},"metadata":{},"sourceType":"module"}