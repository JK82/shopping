{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { createContext, useContext, useMemo } from 'react';\nimport { useApi } from './useApi';\nconst ShoppingListConstext = /*#__PURE__*/createContext();\nexport const ShoppingListProvider = ShoppingListProvider.Provider;\nexport default function useShoppingList() {\n  _s();\n\n  const api = useApi();\n  const {\n    shoppingList,\n    setShoppingList\n  } = useContext(BasketContext);\n  const self = useMemo(() => {\n    return { ...shoppingList,\n\n      // Check if a this represents a valid shoppingList\n      get itemCount() {\n        var _shoppingList$0$items;\n\n        return ((_shoppingList$0$items = shoppingList[0].items) === null || _shoppingList$0$items === void 0 ? void 0 : _shoppingList$0$items.length) || 0;\n      },\n\n      async getOrCreateShoppingList() {\n        let shoppingList = await api.getShoppingList();\n\n        if (!shoppingList || shoppingList.length <= 0) {\n          shoppingList = await api.createShoppingList();\n        }\n\n        setShoppingList(shoppingList);\n        return shoppingList;\n      },\n\n      async addItemToShoppingList(values) {\n        values.list_id = this.shoppingList.id;\n        await api.createShoppingListItem(values);\n        let shoppingList = await api.getShoppingList();\n        setShoppingList(shoppingList);\n      }\n\n    };\n  }, [shoppingList, api, setShoppingList]);\n  return self;\n}\n\n_s(useShoppingList, \"k6UmQvnAOflCKDDwtzZ/FCL8wYk=\", false, function () {\n  return [useApi];\n});","map":{"version":3,"sources":["/Users/johnkeane/keanelabs/shopping-list/client/src/hooks/useShoppingList.js"],"names":["createContext","useContext","useMemo","useApi","ShoppingListConstext","ShoppingListProvider","Provider","useShoppingList","api","shoppingList","setShoppingList","BasketContext","self","itemCount","items","length","getOrCreateShoppingList","getShoppingList","createShoppingList","addItemToShoppingList","values","list_id","id","createShoppingListItem"],"mappings":";;AAAA,SAAQA,aAAR,EAAuBC,UAAvB,EAAmCC,OAAnC,QAAiD,OAAjD;AACA,SAAQC,MAAR,QAAqB,UAArB;AAEA,MAAMC,oBAAoB,gBAAGJ,aAAa,EAA1C;AACA,OAAO,MAAMK,oBAAoB,GAAGA,oBAAoB,CAACC,QAAlD;AAEP,eAAe,SAASC,eAAT,GAA2B;AAAA;;AACtC,QAAMC,GAAG,GAAGL,MAAM,EAAlB;AACA,QAAM;AAACM,IAAAA,YAAD;AAAeC,IAAAA;AAAf,MAAkCT,UAAU,CAACU,aAAD,CAAlD;AAEA,QAAMC,IAAI,GAAGV,OAAO,CAAC,MAAM;AACvB,WAAO,EACH,GAAGO,YADA;;AAGH;AAEA,UAAII,SAAJ,GAAgB;AAAA;;AACZ,eAAO,0BAAAJ,YAAY,CAAC,CAAD,CAAZ,CAAgBK,KAAhB,gFAAuBC,MAAvB,KAAiC,CAAxC;AACH,OAPE;;AASH,YAAMC,uBAAN,GAAgC;AAC5B,YAAIP,YAAY,GAAG,MAAMD,GAAG,CAACS,eAAJ,EAAzB;;AACA,YAAI,CAACR,YAAD,IAAiBA,YAAY,CAACM,MAAb,IAAuB,CAA5C,EAA+C;AAC3CN,UAAAA,YAAY,GAAG,MAAMD,GAAG,CAACU,kBAAJ,EAArB;AACH;;AACDR,QAAAA,eAAe,CAACD,YAAD,CAAf;AACA,eAAOA,YAAP;AACH,OAhBE;;AAkBH,YAAMU,qBAAN,CAA4BC,MAA5B,EAAoC;AAChCA,QAAAA,MAAM,CAACC,OAAP,GAAiB,KAAKZ,YAAL,CAAkBa,EAAnC;AACA,cAAMd,GAAG,CAACe,sBAAJ,CAA2BH,MAA3B,CAAN;AACA,YAAIX,YAAY,GAAG,MAAMD,GAAG,CAACS,eAAJ,EAAzB;AACAP,QAAAA,eAAe,CAACD,YAAD,CAAf;AACH;;AAvBE,KAAP;AAyBH,GA1BmB,EA0BjB,CAACA,YAAD,EAAeD,GAAf,EAAoBE,eAApB,CA1BiB,CAApB;AA4BA,SAAOE,IAAP;AACH;;GAjCuBL,e;UACRJ,M","sourcesContent":["import {createContext, useContext, useMemo} from 'react'\nimport {useApi} from './useApi'\n\nconst ShoppingListConstext = createContext()\nexport const ShoppingListProvider = ShoppingListProvider.Provider\n\nexport default function useShoppingList() {\n    const api = useApi()\n    const {shoppingList, setShoppingList} = useContext(BasketContext)\n\n    const self = useMemo(() => {\n        return {\n            ...shoppingList,\n\n            // Check if a this represents a valid shoppingList\n\n            get itemCount() {\n                return shoppingList[0].items?.length || 0\n            },\n\n            async getOrCreateShoppingList() {\n                let shoppingList = await api.getShoppingList()\n                if (!shoppingList || shoppingList.length <= 0) {\n                    shoppingList = await api.createShoppingList()\n                }\n                setShoppingList(shoppingList)\n                return shoppingList\n            },\n\n            async addItemToShoppingList(values) {\n                values.list_id = this.shoppingList.id\n                await api.createShoppingListItem(values)\n                let shoppingList = await api.getShoppingList()\n                setShoppingList(shoppingList)\n            }\n        }\n    }, [shoppingList, api, setShoppingList])\n\n    return self\n}\n"]},"metadata":{},"sourceType":"module"}