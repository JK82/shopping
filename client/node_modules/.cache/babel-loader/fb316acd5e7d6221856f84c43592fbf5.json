{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useSession } from '@clerk/clerk-react';\nexport const useApi = () => {\n  _s();\n\n  const session = useSession();\n\n  const getSupabaseToken = async () => {\n    const supabaseAccessToken = await session.getToken({\n      template: 'Supabase'\n    });\n    return supabaseAccessToken;\n  };\n\n  const getShoppingList = async () => {\n    const accessToken = await getSupabaseToken();\n    const list = await fetch(`/api/list?accesstoken=${accessToken}`);\n    const listJson = await list.json();\n    return listJson;\n  };\n\n  const createShoppingList = async () => {\n    const accesstoken = await getSupabaseToken();\n    const data = {\n      userId: session.user.id,\n      accesstoken\n    };\n    const list = await fetch(`/api/list`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const listJson = await list.json();\n    return listJson;\n  };\n\n  const createShoppingListItem = async data => {\n    const accesstoken = await getSupabaseToken();\n    const item = await fetch(`/api/item`, {\n      method: 'POST',\n      body: JSON.stringify({\n        data,\n        accesstoken\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const itemJson = await item.json();\n    return itemJson;\n  };\n\n  const updateShoppingListItem = async data => {\n    const accesstoken = await getSupabaseToken();\n    const item = await fetch(`/api/item`, {\n      method: 'POST',\n      body: JSON.stringify({\n        data,\n        accesstoken\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const itemJson = await item.json();\n    return itemJson;\n  };\n\n  const deleteShoppingListItem = async itemId => {\n    const accesstoken = await getSupabaseToken();\n    const item = await fetch(`/api/item`, {\n      method: 'DELETE',\n      body: JSON.stringify({\n        itemId,\n        accesstoken\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const itemJson = await item.json();\n    return itemJson;\n  };\n\n  return {\n    getShoppingList,\n    createShoppingList,\n    createShoppingListItem,\n    updateShoppingListItem,\n    deleteShoppingListItem\n  };\n};\n\n_s(useApi, \"TLdHK4K4L7Pm+aVG7dSGM4qSxic=\", false, function () {\n  return [useSession];\n});","map":{"version":3,"sources":["/Users/johnkeane/keanelabs/shopping-list/client/src/hooks/useApi.js"],"names":["useSession","useApi","session","getSupabaseToken","supabaseAccessToken","getToken","template","getShoppingList","accessToken","list","fetch","listJson","json","createShoppingList","accesstoken","data","userId","user","id","method","body","JSON","stringify","headers","createShoppingListItem","item","itemJson","updateShoppingListItem","deleteShoppingListItem","itemId"],"mappings":"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","sourcesContent":["import {useSession} from '@clerk/clerk-react'\n\nexport const useApi = () => {\n    const session = useSession()\n\n    const getSupabaseToken = async () => {\n        const supabaseAccessToken = await session.getToken({\n            template: 'Supabase'\n        })\n\n        return supabaseAccessToken\n    }\n\n    const getShoppingList = async () => {\n        const accessToken = await getSupabaseToken()\n        const list = await fetch(`/api/list?accesstoken=${accessToken}`)\n        const listJson = await list.json()\n        return listJson\n    }\n\n    const createShoppingList = async () => {\n        const accesstoken = await getSupabaseToken()\n        const data = {\n            userId: session.user.id,\n            accesstoken\n        }\n        const list = await fetch(`/api/list`, {\n            method: 'POST',\n            body: JSON.stringify(data),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        const listJson = await list.json()\n        return listJson\n    }\n\n    const createShoppingListItem = async (data) => {\n        const accesstoken = await getSupabaseToken()\n        const item = await fetch(`/api/item`, {\n            method: 'POST',\n            body: JSON.stringify({data, accesstoken}),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        const itemJson = await item.json()\n        return itemJson\n    }\n\n    const updateShoppingListItem = async (data) => {\n        const accesstoken = await getSupabaseToken()\n        const item = await fetch(`/api/item`, {\n            method: 'POST',\n            body: JSON.stringify({data, accesstoken}),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        const itemJson = await item.json()\n        return itemJson\n    }\n\n    const deleteShoppingListItem = async (itemId) => {\n        const accesstoken = await getSupabaseToken()\n        const item = await fetch(`/api/item`, {\n            method: 'DELETE',\n            body: JSON.stringify({itemId, accesstoken}),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        const itemJson = await item.json()\n        return itemJson\n    }\n\n    return {\n        getShoppingList,\n        createShoppingList,\n        createShoppingListItem,\n        updateShoppingListItem,\n        deleteShoppingListItem\n    }\n}\n"]},"metadata":{},"sourceType":"module"}